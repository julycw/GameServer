#协议单路复用框架
在网络游戏服务器设计中，一般都会遇到协议多路复用的场景。比如登录服务器和玩家客户端之间有1:N的多个TCP连接；登录服务器和游戏服务器之间是1:1的TCP连接。玩家登录游戏的大致流程是这样的：

1. 玩家连接登录服务器
2. 登录服务器向数据库请求玩家数据
3. 登录服务器获取到玩家数据，把玩家数据转发给游戏服务器进行加载包括创建玩家对象等
4. 登录服务器获取到加载成功回应后，通知玩家客户端可以进入游戏世界

在3和4中，因为登录服务器和游戏服务器通常只有一个TCP连接，所有玩家数据都是通过这个连接进行传输，所以需要从协议包中区分出是哪个玩家的数据。通常这个区分的依据可以是玩家的角色名，但是也可以更通用一些，用一个数字ID来区分，这样就把协议包的分发处理和协议包中与游戏逻辑有关的内容分离开来。

来源（我加了注释）：
> [一种用于网游服务器的支持多路复用的网络协议处理框架_stevewang_新浪博客](http://blog.sina.com.cn/s/blog_9be3b8f10101dfpt.html)